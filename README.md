# Домашнее задание к занятию "`SQL. Часть 1`" - `Дунаев Дмитрий`


### Инструкция по выполнению домашнего задания

   1. Сделайте `fork` данного репозитория к себе в Github и переименуйте его по названию или номеру занятия, например, https://github.com/имя-вашего-репозитория/git-hw или  https://github.com/имя-вашего-репозитория/7-1-ansible-hw).
   2. Выполните клонирование данного репозитория к себе на ПК с помощью команды `git clone`.
   3. Выполните домашнее задание и заполните у себя локально этот файл README.md:
      - впишите вверху название занятия и вашу фамилию и имя
      - в каждом задании добавьте решение в требуемом виде (текст/код/скриншоты/ссылка)
      - для корректного добавления скриншотов воспользуйтесь [инструкцией "Как вставить скриншот в шаблон с решением](https://github.com/netology-code/sys-pattern-homework/blob/main/screen-instruction.md)
      - при оформлении используйте возможности языка разметки md (коротко об этом можно посмотреть в [инструкции  по MarkDown](https://github.com/netology-code/sys-pattern-homework/blob/main/md-instruction.md))
   4. После завершения работы над домашним заданием сделайте коммит (`git commit -m "comment"`) и отправьте его на Github (`git push origin`);
   5. Для проверки домашнего задания преподавателем в личном кабинете прикрепите и отправьте ссылку на решение в виде md-файла в вашем Github.
   6. Любые вопросы по выполнению заданий спрашивайте в чате учебной группы и/или в разделе “Вопросы по заданию” в личном кабинете.
   
Желаем успехов в выполнении домашнего задания!
   
### Дополнительные материалы, которые могут быть полезны для выполнения задания

1. [Руководство по оформлению Markdown файлов](https://gist.github.com/Jekins/2bf2d0638163f1294637#Code)

---

Задание можно выполнить как в любом IDE, так и в командной строке.

### Задание 1

Получите уникальные названия районов из таблицы с адресами, которые начинаются на “K” и заканчиваются на “a” и не содержат пробелов.

---

### Решение 1

Запрос и вывод ниже:
```SQL
MySQL [sakila]> SELECT district FROM address WHERE district LIKE 'K%a' AND district NOT LIKE '% %';
+-----------+
| district  |
+-----------+
| Kanagawa  |
| Kalmykia  |
| Kaduna    |
| Karnataka |
| Kanagawa  |
| Kütahya   |
| Karnataka |
| Kerala    |
| Kitaa     |
| Kaduna    |
| Karnataka |
| Kerala    |
| Karnataka |
| Karnataka |
+-----------+
14 rows in set (0,003 sec)
```

---

### Задание 2

Получите из таблицы платежей за прокат фильмов информацию по платежам, которые выполнялись в промежуток с 15 июня 2005 года по 18 июня 2005 года **включительно** и стоимость которых превышает 10.00.

---

### Решение 2

Запрос и вывод ниже:
```SQL
MySQL [sakila]> SELECT *, CAST(payment_date AS DATE) AS DATE FROM payment WHERE (payment_date BETWEEN '2005-06-15' AND '2005-06-19') AND amount >10;
+------------+-------------+----------+-----------+--------+---------------------+---------------------+------------+
| payment_id | customer_id | staff_id | rental_id | amount | payment_date        | last_update         | DATE       |
+------------+-------------+----------+-----------+--------+---------------------+---------------------+------------+
|        908 |          33 |        1 |      1301 |  10.99 | 2005-06-15 09:46:33 | 2006-02-15 22:12:36 | 2005-06-15 |
|       7017 |         260 |        1 |      2091 |  10.99 | 2005-06-17 18:09:04 | 2006-02-15 22:14:58 | 2005-06-17 |
|       8272 |         305 |        1 |      2166 |  11.99 | 2005-06-17 23:51:21 | 2006-02-15 22:15:47 | 2005-06-17 |
|      12888 |         477 |        1 |      2306 |  10.99 | 2005-06-18 08:33:23 | 2006-02-15 22:19:46 | 2005-06-18 |
|      13892 |         516 |        1 |      1718 |  10.99 | 2005-06-16 14:52:02 | 2006-02-15 22:20:47 | 2005-06-16 |
|      14620 |         544 |        2 |      1434 |  10.99 | 2005-06-15 18:30:46 | 2006-02-15 22:21:35 | 2005-06-15 |
|      15313 |         572 |        2 |      1889 |  10.99 | 2005-06-17 04:05:12 | 2006-02-15 22:22:22 | 2005-06-17 |
+------------+-------------+----------+-----------+--------+---------------------+---------------------+------------+
7 rows in set (0,010 sec)
```

---

### Задание 3

Получите последние пять аренд фильмов.

---

### Решение 3

Запрос и вывод ниже:
```SQL
MySQL [sakila]> SELECT rental_id, rental_date FROM rental ORDER BY rental_date DESC LIMIT 5;
+-----------+---------------------+
| rental_id | rental_date         |
+-----------+---------------------+
|     11739 | 2006-02-14 15:16:03 |
|     14616 | 2006-02-14 15:16:03 |
|     11676 | 2006-02-14 15:16:03 |
|     15966 | 2006-02-14 15:16:03 |
|     13486 | 2006-02-14 15:16:03 |
+-----------+---------------------+
5 rows in set (0,002 sec)
```

---

### Задание 4

Одним запросом получите активных покупателей, имена которых Kelly или Willie. 

Сформируйте вывод в результат таким образом:
- все буквы в фамилии и имени из верхнего регистра переведите в нижний регистр,
- замените буквы 'll' в именах на 'pp'.

---

### Решение 4

Запрос и вывод ниже:
```SQL
MySQL [sakila]> SELECT customer_id, LOWER(REPLACE(first_name, 'L', 'p')), LOWER(last_name) FROM customer WHERE first_name LIKE 'Kelly' OR first_name LIKE 'Willie';
+-------------+--------------------------------------+------------------+
| customer_id | LOWER(REPLACE(first_name, 'L', 'p')) | LOWER(last_name) |
+-------------+--------------------------------------+------------------+
|          67 | keppy                                | torres           |
|         219 | wippie                               | howell           |
|         359 | wippie                               | markham          |
|         546 | keppy                                | knott            |
+-------------+--------------------------------------+------------------+
4 rows in set (0,001 sec)
```

## Дополнительные задания (со звёздочкой*)
Эти задания дополнительные, то есть не обязательные к выполнению, и никак не повлияют на получение вами зачёта по этому домашнему заданию. Вы можете их выполнить, если хотите глубже шире разобраться в материале.

### Задание 5*

Выведите Email каждого покупателя, разделив значение Email на две отдельных колонки: в первой колонке должно быть значение, указанное до @, во второй — значение, указанное после @.

---

### Решение 5*

Запрос и вывод ниже:

```SQL
MySQL [sakila]> SELECT email, SUBSTRING_INDEX(email , '@', 1), SUBSTRING_INDEX(email , '@', -1) FROM customer;
+------------------------------------------+---------------------------------+----------------------------------+
| email                                    | SUBSTRING_INDEX(email , '@', 1) | SUBSTRING_INDEX(email , '@', -1) |
+------------------------------------------+---------------------------------+----------------------------------+
| MARY.SMITH@sakilacustomer.org            | MARY.SMITH                      | sakilacustomer.org               |
| PATRICIA.JOHNSON@sakilacustomer.org      | PATRICIA.JOHNSON                | sakilacustomer.org               |
| LINDA.WILLIAMS@sakilacustomer.org        | LINDA.WILLIAMS                  | sakilacustomer.org               |
| BARBARA.JONES@sakilacustomer.org         | BARBARA.JONES                   | sakilacustomer.org               |
| ELIZABETH.BROWN@sakilacustomer.org       | ELIZABETH.BROWN                 | sakilacustomer.org               |
| JENNIFER.DAVIS@sakilacustomer.org        | JENNIFER.DAVIS                  | sakilacustomer.org               |
| MARIA.MILLER@sakilacustomer.org          | MARIA.MILLER                    | sakilacustomer.org               |
| SUSAN.WILSON@sakilacustomer.org          | SUSAN.WILSON                    | sakilacustomer.org               |
| MARGARET.MOORE@sakilacustomer.org        | MARGARET.MOORE                  | sakilacustomer.org               |
| DOROTHY.TAYLOR@sakilacustomer.org        | DOROTHY.TAYLOR                  | sakilacustomer.org               |
| LISA.ANDERSON@sakilacustomer.org         | LISA.ANDERSON                   | sakilacustomer.org               |
...
```
